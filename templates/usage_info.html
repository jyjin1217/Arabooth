{% extends "base.html" %}

{% block head %}    
    
{% endblock %}

{% block content %}
<!-- Begin Page Content -->
<div class="container-fluid">

    <div style="width: 100%; height: 100%; display: table;">
        <div style="display: table-cell; vertical-align: middle;">
 
            <div class="card shadow mb-4 myCardSet" style="margin-top: 1.5rem!important;">
                <div class="card-header py-3 chartTop">
                    
                    <h6 class="m-0 font-weight-bold text-primary">사용량 통계</h6>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; align-items: center;">
                        <div>검색일자 : {{year}}년 {{month}}월</div>
                        <div style="justify-self: end;">
                            <select id="combo_year">
                                <option value="none">- YEAR -</option>
                                {% for val in cYear %}
                                <option value={{val}}>{{val}}</option>
                                {% endfor %}
                            </select>
    
                            <select id="combo_month">
                                <option value="none">- MONTH -</option>
                                <option value="01">01</option>
                                <option value="02">02</option>
                                <option value="03">03</option>
                                <option value="04">04</option>
                                <option value="05">05</option>
                                <option value="06">06</option>
                                <option value="07">07</option>
                                <option value="08">08</option>
                                <option value="09">09</option>
                                <option value="10">10</option>
                                <option value="11">11</option>
                                <option value="12">12</option>
                            </select>
    
                            <button onclick="newSearchRequest()" class="btn btn-info btn-icon-split">
                                <span class="icon text-white-50">
                                    <i class="fas fa-arrow-right"></i>
                                </span>
                                <span class="text">Search</span>
                            </button>  
                        </div>
                    </div>

                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                            <thead>
                                <tr>
                                    <th>부스</th>
                                    <th>사용자</th>
                                    <th>소속</th>
                                    <th>이용시작</th>
                                    <th>이용종료</th>
                                    <th>사용시간(sec)</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for value in content %}
                                <tr>
                                    <td>{{value['BoothName']}}</td>
                                    <td>{{value['User']}}</td>
                                    <td>{{value['Company']}}</td>
                                    <td>{{value['StartDate']}}</td>
                                    <td>{{value['EndDate']}}</td>
                                    <td>{{value['Duration-sec']}}</td>
                                </tr>
                                {% endfor %}                            
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>


        </div>
    </div>

</div>

<script>
    const newSearchRequest = () => {
        let year = document.getElementById('combo_year');
        let month = document.getElementById('combo_month');

        if (year.value == "none" || month.value== "none"){
            alert("연도와 월 모두 선택해야만 합니다")
        }
        else {
            location.href = location.origin + location.pathname + "?year=" + year.value + "&month=" + month.value;
        }
    }
</script>

<!-- /.container-fluid -->
{% endblock %}